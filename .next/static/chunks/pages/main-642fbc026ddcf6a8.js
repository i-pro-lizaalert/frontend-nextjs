(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[671],{575:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/main",function(){return e(6303)}])},1331:function(n,t,e){"use strict";var o=e(7294);t.Z=function(n,t){var e=(0,o.useState)(null),i=(e[0],e[1],(0,o.useRef)(!0));(0,o.useEffect)((function(){if(!i.current)return n();i.current=!1}),t)}},3648:function(n,t,e){"use strict";e.d(t,{o:function(){return d},t:function(){return x}});var o=e(5893),i=e(7294),r=e(5861),c=e(6113),a=e(796),s=e(9953),l=e(8333),u=e(1447),h=e(644),f=e(9317);function d(n){return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(r.Z,{variant:"h6",color:"inherit",sx:{ml:2,my:1},children:"\u041a\u0435\u0439\u0441\u044b"}),(0,o.jsxs)(c.Z,{selected:1==n.select,to:"/cases",children:[(0,o.jsx)(a.Z,{children:(0,o.jsx)(u.Z,{})}),(0,o.jsx)(s.Z,{primary:"\u0412\u0441\u0435 \u043a\u0435\u0439\u0441\u044b"})]}),(0,o.jsxs)(c.Z,{selected:2==n.select,to:"my_cases",children:[(0,o.jsx)(a.Z,{children:(0,o.jsx)(l.Z,{})}),(0,o.jsx)(s.Z,{primary:"\u041c\u043e\u0438 \u043a\u0435\u0439\u0441\u044b"})]})]})}function x(n){return(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(r.Z,{variant:"h6",color:"inherit",sx:{ml:2,mt:2,mb:1},children:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438"}),(0,o.jsxs)(c.Z,{selected:3==n.select,onClick:function(){fetch("".concat(window.location.origin,":8088/list")).then((function(n){200==n.status&&n.json().then((function(n){console.log(n),localStorage.setItem("photos",JSON.stringify(n)),document.location.href="/main"}))}))},children:[(0,o.jsx)(a.Z,{children:(0,o.jsx)(h.Z,{})}),(0,o.jsx)(s.Z,{primary:"\u0412\u0441\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438"})]}),(0,o.jsxs)(c.Z,{selected:4==n.select,href:"/model",children:[(0,o.jsx)(a.Z,{children:(0,o.jsx)(f.Z,{})}),(0,o.jsx)(s.Z,{primary:"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u0435\u0433\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"})]})]})}},6303:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return $}});var o=e(5893),i=e(2293),r=e(155),c=e(3946),a=e(7533),s=e(5861),l=e(1519),u=e(8462),h=e(9520),f=e(7357),d=e(8032),x=e(326),m=e(1265),j=e(1927),p=e(7294),g=e(3648),Z=e(6540),y=e(2663),S=e(6242),w=e(3965),v=e(4267),b=e(2023),C=e(3321),I=e(7918);function _(n){return(0,o.jsx)(I.Z,{label:n.name,sx:{mx:1}})}function A(n){return(0,o.jsx)(y.s,{default:{x:1e3*Math.random(),y:500*Math.random(),width:400,height:400},children:(0,o.jsxs)(S.Z,{sx:{maxWidth:3e3,maxHeight:3e3,width:"100%",height:"100%"},children:[(0,o.jsx)(w.Z,{component:"img",height:"70%",image:n.photo}),(0,o.jsxs)(v.Z,{children:[(0,o.jsx)(s.Z,{gutterBottom:!0,variant:"h5",component:"div",children:n.description}),(0,o.jsx)(s.Z,{variant:"body2",color:"text.secondary",children:n.date}),(0,o.jsx)(f.Z,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap"},children:n.tags.map((function(n){return(0,o.jsx)(_,{name:n.name},n.name)}))})]}),(0,o.jsxs)(b.Z,{children:[(0,o.jsx)(C.Z,{size:"small",onClick:function(){fetch("".concat(window.location.origin,":8088/case/file"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({photos:[{path:n.source}],case:{id:localStorage.case_id}})}).then((function(n){document.location.href="/main"}))},children:"\u0418\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0444\u043e\u0442\u043e"}),(0,o.jsx)(C.Z,{size:"small",href:n.photo,children:"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0444\u043e\u0442\u043e"}),(0,o.jsx)(C.Z,{size:"small",onClick:function(){localStorage.setItem("path",n.source),n.addTagDialogOpen()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u0433"})]})]})})}var E=e(2761),k=e(6565),O=e(2748),T=e(7645),N=e(6514),W=e(4546);function D(n){var t=n.onClose,e=n.open,i=(0,p.useState)(""),r=i[0],c=i[1];return(0,o.jsxs)(O.Z,{onClose:function(){t("")},open:e,children:[(0,o.jsx)(T.Z,{children:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0442\u0435\u0433\u0430\u043c"}),(0,o.jsxs)(N.Z,{children:[(0,o.jsx)(W.Z,{margin:"normal",required:!0,fullWidth:!0,multiline:!0,label:"\u0421\u043f\u0438\u0441\u043e\u043a \u0442\u0435\u0433\u043e\u0432 \u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043f\u044f\u0442\u0443\u044e",value:r,onChange:function(n){c(n.target.value)}}),(0,o.jsx)(C.Z,{fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:function(){t(r)},children:"\u0413\u043e\u0442\u043e\u0432\u043e"})]})]})}function P(n){var t=n.onClose,e=n.open,i=(0,p.useState)(""),r=i[0],c=i[1];return(0,o.jsxs)(O.Z,{onClose:function(){t("")},open:e,children:[(0,o.jsx)(T.Z,{children:"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0435\u0433"}),(0,o.jsxs)(N.Z,{children:[(0,o.jsx)(W.Z,{margin:"normal",required:!0,fullWidth:!0,multiline:!0,label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0442\u0435\u0433\u0430",value:r,onChange:function(n){c(n.target.value)}}),(0,o.jsx)(C.Z,{fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:function(){t(r)},children:"\u0413\u043e\u0442\u043e\u0432\u043e"})]})]})}var z=e(9661),J=e(1331);function B(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,o=new Array(t);e<t;e++)o[e]=n[e];return o}function M(n){return function(n){if(Array.isArray(n))return B(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"===typeof n)return B(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return B(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(n){var t=n.onClose,e=n.open,i=(0,p.useState)(""),r=i[0],c=i[1],a=(0,p.useState)([]),u=a[0],h=a[1];return(0,J.Z)((function(){h([]),fetch("".concat(window.location.origin,":8088/list")).then((function(n){200==n.status&&n.json().then((function(n){var t=[];n.forEach((function(n){t.push(fetch("".concat(window.location.origin,":8088/file?path=").concat(n)))})),Promise.all(t).then((function(n){n.forEach((function(n){200==n.status&&n.json().then((function(n){console.log(n),h((function(t){return M(t).concat([n])}))}))})),h((function(n){return M(new Set(n))}))}))}))}))}),[]),(0,o.jsxs)(O.Z,{onClose:function(){t("")},open:e,children:[(0,o.jsx)(T.Z,{children:"\u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e \u0432 \u043a\u0435\u0439\u0441"}),(0,o.jsx)(N.Z,{children:(0,o.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"row"},children:[(0,o.jsxs)(f.Z,{sx:{m:1},children:[(0,o.jsx)(W.Z,{margin:"normal",required:!0,fullWidth:!0,label:"\u041f\u0443\u0442\u044c \u043a \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",value:r,onChange:function(n){c(n.target.value)}}),(0,o.jsx)(C.Z,{fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:function(){t(r)},children:"\u0413\u043e\u0442\u043e\u0432\u043e"})]}),(0,o.jsxs)(f.Z,{sx:{m:1},children:[(0,o.jsx)(s.Z,{variant:"h6",children:"\u0424\u0430\u0439\u043b\u044b:"}),(0,o.jsx)(l.Z,{sx:{mb:2}}),u.map((function(n){return(0,o.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"row"},children:[(0,o.jsx)(z.Z,{sx:{mr:1},src:"".concat(window.location.origin,":8088/")+n.path}),(0,o.jsx)(s.Z,{children:n.photo.source},n)]},n.path)}))]})]})})]})}function F(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,o=new Array(t);e<t;e++)o[e]=n[e];return o}function U(n){return function(n){if(Array.isArray(n))return F(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"===typeof n)return F(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return F(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=(0,m.Z)();function $(){var n=(0,p.useState)(!1),t=n[0],e=n[1],m=(0,p.useState)(!1),y=m[0],S=m[1],w=(0,p.useState)(!1),v=(w[0],w[1],(0,p.useState)(!1)),b=v[0],C=v[1],I=(0,p.useState)(!1),_=I[0],O=I[1],T=(0,p.useState)([]),N=T[0],W=T[1],z=(0,p.useState)("\u041a\u0435\u0439\u0441"),B=z[0],M=z[1],F=(0,p.useState)(0),$=F[0],G=F[1];return(0,J.Z)((function(){if(!$){if(W([]),console.log(localStorage.photos),localStorage.title&&(M(localStorage.title),localStorage.removeItem("title")),localStorage.photos){console.log("here");var n=[],t=JSON.parse(localStorage.photos);localStorage.removeItem("photos"),t.forEach((function(t){n.push(fetch("".concat(window.location.origin,":8088/file?path=").concat(t)))})),Promise.all(n).then((function(n){n.forEach((function(n){200==n.status&&n.json().then((function(n){console.log(n),W((function(t){return U(t).concat([n])}))}))})),W((function(n){return U(new Set(n))}))}))}else localStorage.case_id&&fetch("".concat(window.location.origin,":8088/case/file?case_id=").concat(localStorage.case_id),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}}).then((function(n){200==n.status?n.json().then((function(n){var t=[];n.forEach((function(n){t.push(fetch("".concat(window.location.origin,":8088/file?path=").concat(n)))})),Promise.all(t).then((function(n){n.forEach((function(n){200==n.status&&n.json().then((function(n){W((function(t){return U(t).concat([n])}))}))})),W((function(n){return U(new Set(n))}))}))})):n.json().then((function(n){console.log(n)}))}));G(1)}}),[]),(0,o.jsxs)(j.Z,{theme:X,children:[(0,o.jsx)(i.Z,{position:"static",children:(0,o.jsxs)(r.Z,{children:[(0,o.jsx)(c.Z,{size:"large",color:"inherit",sx:{mr:5},onClick:function(){e(!t)},children:(0,o.jsx)(x.Z,{})}),(0,o.jsxs)(a.ZP,{open:t,onClose:function(){e(!1)},children:[(0,o.jsx)(r.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",px:[1]},children:(0,o.jsx)(s.Z,{variant:"h5",color:"inherit",children:"\u041c\u0435\u043d\u044e"})}),(0,o.jsx)(l.Z,{}),(0,o.jsxs)(u.Z,{component:"nav",children:[(0,o.jsx)(g.o,{select:3}),(0,o.jsx)(l.Z,{sx:{my:1}}),(0,o.jsx)(g.t,{select:3})]})]}),(0,o.jsx)(s.Z,{variant:"h6",sx:{flexGrow:1},children:B})]})}),(0,o.jsx)(h.Z,{sx:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",height:"10000px"},children:N.map((function(n){return(0,o.jsx)(A,{source:n.photo.source,photo:"".concat(window.location.origin,":8088/")+n.path,tags:n.tags,addTagDialogOpen:function(){C(!0)}},n.path)}))}),(0,o.jsxs)(f.Z,{sx:{display:"flex",flexDirection:"column",alightItems:"center",position:"fixed",bottom:"3em",right:"3em"},children:[(0,o.jsxs)(d.Z,{variant:"extended",sx:{m:1},onClick:function(){S(!0)},children:[(0,o.jsx)(E.Z,{sx:{mr:1}}),"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0442\u0435\u0433\u0430\u043c"]}),(0,o.jsxs)(d.Z,{variant:"extended",sx:{m:1},children:[(0,o.jsx)(k.Z,{sx:{mr:1}}),"\u0421\u0433\u0440\u0443\u043f\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c"]}),(0,o.jsxs)(d.Z,{variant:"extended",sx:{m:1},onClick:function(){O(!0)},children:[(0,o.jsx)(Z.Z,{sx:{mr:1}}),"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"]}),(0,o.jsx)(D,{open:y,onClose:function(n){console.log(n),S(!1),n=n.split(",").map((function(n){return"tags=".concat(n)})).join("&"),fetch("".concat(window.location.origin,":8088/file/search?").concat(n)).then((function(n){200==n.status&&n.json().then((function(n){console.log(n),localStorage.setItem("photos",JSON.stringify(n)),localStorage.setItem("title","\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"),document.location.href="/main"}))}))}}),(0,o.jsx)(P,{open:b,onClose:function(n){console.log(n,localStorage.path),C(!1),fetch("".concat(window.location.origin,":8088/file/tags"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file:{path:localStorage.path},tags:[{name:n}]})}).then((function(n){}))}}),(0,o.jsx)(q,{open:_,onClose:function(n){console.log(n),O(!1),fetch("".concat(window.location.origin,":8088/case/file"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"},body:JSON.stringify({photos:[{path:n}],case:{id:localStorage.getItem("case_id")}})}).then((function(n){200==n.status&&n.json().then((function(n){console.log(n),document.location.href="/main"}))}))}})]})]})}}},function(n){n.O(0,[865,738,546,92,631,393,774,888,179],(function(){return t=575,n(n.s=t);var t}));var t=n.O();_N_E=t}]);